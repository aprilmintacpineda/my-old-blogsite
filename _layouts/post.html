---
layout: default
---

{% assign max_related_posts = 5 %}
{% assign min_common_tags = 2 %}
{% assign related_counter = 0 %}

<article class="post-container limited-width">
  <div class="wrapper">
    <header class="article-header">
      <img class="cover-image" src="/blog/public/post-resources/{{ page.cover_image }}">
      <div class="post-information">
        <h1>{{ page.post_title }}</h1>
        <div>Date posted: {{ page.date_posted | date: '%B %d, %Y' }}</div>
        <div>Category: {{ page.category }}</div>
        <br>
        <div>{{ page.description }}</div>
        <br>
        <div class="tags">
          <p>Tags:</p>
          {% for tag in page.tags %}
            <span>
              {{ tag }}
            </span>
          {% endfor %}
        </div>
      </div>
    </header>
    <div class="content-wrapper">
      <section class="article-content">
        <div class="markdown">
          {{ content }}
        </div>
      </section>
      <section class="related-articles load-defaults">
        <h1 class="title">Related articles</h1>
        {% for post in site.posts %}
          {% assign same_tag_count = 0 %}

          {% for tag in post.tags %}
            {% if post.url != page.url and page.tags contains tag %}
              {% assign same_tag_count = same_tag_count | plus: 1 %}
            {% endif %}
          {% endfor %}

          {% if same_tag_count >= min_common_tags %}
            {% assign related_counter = related_counter | plus: 1 %}
            <article>
              <header>
                <img src="/blog/public/post-resources/{{ post.cover_image }}">
              </header>
              <section>
                <div><h1>{{ post.title }}</h1></div>
                <div>{{ post.description }}</div>
                <div class="tags">
                  <strong>Tags:</strong> <span>{{ post.tags | array_to_sentence_string  }}</span>
                </div>
                <div><a href="/blog{{ post.url }}">Read more</a></div>
              </section>
            </article>
          {% endif %}
        {% endfor %}
        {% if related_counter == 0 %}
          <p>There are no related articles.</p>
        {% endif %}
      </section>
    </div>
  </div>
</article>